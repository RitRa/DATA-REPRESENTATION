<html>
    <head>
        <title>View cars</title>
    </head>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

<body>
<h1>Cars</h1>
    <button id="showCreateButton" class="btn btn-primary" onclick="showCreate()">Create</button>
<div>
<h2><span>All cars</span></h2>
    <table class="table" id="carTable">
        <thead>
            <tr>
                <th>Reg</th>
                <th>Make</th>
                <th>Model</th>
                <th>Price</th>
                <th>Update</th>
                <th>Delete</th>
            </tr>
        </thead>
        <tbody>
        <tr>
            <td>191 MO 123</td>
            <td>Ford</td>
            <td>Modeo</td>
            <td>25,000</td>
            <td><button class="btn btn-link" onclick="showUpdate(this)">update</button></td>
            <td><button class="btn btn-link">delete</button></td>
        </tr>
        <tr>
            <td>12 Delete 123</td>
            <td>Fiat</td>
            <td>Punto</td>
            <td>4,000</td>
            <td><button class="btn btn-link" onclick="showUpdate(this)">update</button></td>
            <td><button class="btn btn-link">delete</button></td>
        </tr>
        <tr>
            <td>08 G 123</td>
            <td>Nissan</td>
            <td>Almera</td>
            <td>500</td>
            <td><button class="btn btn-link" onclick="showUpdate(this)">update</button></td>
            <td><button class="btn btn-link">delete</button></td>
        </tr>
    </tbody>

    </table>

</div>

    <h2><span id="createLabel">Create a</span> <span id="updateLabel">update</span> Car</h2>
      
      <form class="col-md-6" id="createUpdateForm" style="display: none">
        <div class="form-row" >
            <div class="form-group">
                <label for="reg" >Reg</label>
                <input type="text" class="form-control" id="reg" name="reg">
            </div>
        <div class="form-group">
            <label for="make">Make</label>
            <select name="make" id="make" class="form-control">
                <option value="Ford">Ford</option>
                <option value="Fiat">Fiat</option>
                <option value="Nissan">Nissan</option>
            </select>
        </div>
        <div class="form-group">
            <label for="model" >Model</label>
            <input type="text" class="form-control" name="model" id="model">
        </div>
        <div class="form-group">
            <label for="price">Price</label>
            <input type="number" class="form-control" name="price" id="price">
        </div>
    </div>


    <span><button id="doCreateButton" onclick="doCreate()" class="btn btn-primary">Create</button></span>
    <span><button id="doUpdateButton" onclick="doUpdate()" class="btn btn-link">Update</button></span>


</form>

<script>

function showCreate(){
    document.getElementById('showCreateButton').style.display="none"
    document.getElementById('carTable').style.display="none"
    document.getElementById('createUpdateForm').style.display="block"

    document.getElementById('createLabel').style.display="inline"
    document.getElementById('updateLabel').style.display="none"

    document.getElementById('doCreateButton').style.display="block"
    document.getElementById('doUpdateButton').style.display="none"

}

function showUpdate(){
    document.getElementById('showCreateButton').style.display="none"
    document.getElementById('carTable').style.display="none"
    document.getElementById('createUpdateForm').style.display="block"

    document.getElementById('createLabel').style.display="none"
    document.getElementById('updateLabel').style.display="inline"

    document.getElementById('doCreateButton').style.display="none"
    document.getElementById('doUpdateButton').style.css="btn-primary"
    document.getElementById('doUpdateButton').style.display="block"

}
function doCreate(){

    let form = document.getElementById('createUpdateForm')

    //let car = {}

    //car.reg = form.querySelector('input[name="reg"]').value
    //car.make = form.querySelector('select[name="make"]').value
    //car.model = form.querySelector('input[name="model"]').value
    //car.price = form.querySelector('input[name="price"]').value
    let car = {reg: "222",make:"Nissan", model:"Almera", price:"44" }
    console.log(car)
    //console.log(JSON.stringify(car))
    //clearForm()
    //showViewAll()
    addCarToTable(car)


}


function showViewAll(){
    document.getElementById('showCreateButton').style.display="block"
    document.getElementById('carTable').style.display="block"
    document.getElementById('createUpdateForm').style.display="none"
    document.getElementById('createLabel').style.display="none"
    document.getElementById('updateLabel').style.display="none"

    document.getElementById('doCreateButton').style.display="none"
    document.getElementById('doUpdateButton').style.display="none"

}

function clearForm(){
    let form = document.getElementById('createUpdateForm')
    form.querySelector('input[name = "reg"]').disabled = false
    form.querySelector('input[name = "reg"]').value = ''
    form.querySelector('select[name="make"]').value=''
    form.querySelector('input[name = "model"]').value = ''
    form.querySelector('input[name = "price"]').value = ''
}

function addCarToTable(car){
    var tableElement = document.getElementById('carTable')
    var rowElement = tableElement.insertRow(-1)
    // set attribure here
    var cell1 = rowElement.insertCell(0);
    cell1.innerHTML = car.reg
    var cell2 = rowElement.insertCell(1);
    cell2.innerHTML = car.make
    var cell3 = rowElement.insertCell(2);
    cell3.innerHTML = car.model
    var cell4 = rowElement.insertCell(3);
    cell4.innerHTML = car.price
    var cell5 = rowElement.insertCell(4);
    cell5.innerHTML = '<button onclick="showUpdate(this)">Update</button>'
    var cell6 = rowElement.insertCell(5);
    cell6.innerHTML = '<button onclick=doDelete(this)>delete</button>'
}
</script>
</body>
</html>
